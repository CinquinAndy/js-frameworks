# React Router - Navigation dans vos SPAs

Salut ! Maintenant qu'on ma√Ætrise les composants et les hooks, on va s'attaquer √† la **navigation** dans nos applications React.

Quand ton app grandit, tu vas vouloir avoir plusieurs "pages" avec des URLs diff√©rentes. C'est l√† qu'intervient **React Router** !

---

## Qu'est-ce que le routing ?

### Le probl√®me des SPAs

Dans une **Single Page Application (SPA)**, techniquement on n'a qu'une seule page HTML. Mais on veut quand m√™me :

- Des URLs diff√©rentes pour chaque "page" (`/home`, `/about`, `/profile`)
- Le bouton "Pr√©c√©dent" du navigateur qui marche
- Pouvoir partager des liens
- Un bon SEO

### React Router √† la rescousse

React Router va nous permettre de :

- **Associer des composants √† des URLs**
- **Naviguer** entre les pages sans rechargement
- **G√©rer l'historique** du navigateur
- **Passer des param√®tres** dans les URLs

---

## Installation de React Router

```bash
npm install react-router-dom
```

C'est tout ! React Router DOM est la version pour le web (il y a aussi React Router Native pour React Native).

---

## Configuration de base

### 1. Wrapper votre app avec BrowserRouter

Dans votre `main.jsx` :

```jsx
import { StrictMode } from 'react'
import { createRoot } from 'react-dom/client'
import { BrowserRouter } from 'react-router-dom'
import './index.css'
import App from './App.jsx'

createRoot(document.getElementById('root')).render(
  <StrictMode>
    <BrowserRouter>
      <App />
    </BrowserRouter>
  </StrictMode>,
)
```

### 2. D√©finir les routes dans App.jsx

```jsx
import { Routes, Route } from 'react-router-dom'
import Home from './pages/Home'
import About from './pages/About'
import Contact from './pages/Contact'
import NotFound from './pages/NotFound'

function App() {
  return (
    <div>
      <nav>
        <a href="/">Home</a>
        <a href="/about">About</a>
        <a href="/contact">Contact</a>
      </nav>

      <Routes>
        <Route path="/" element={<Home />} />
        <Route path="/about" element={<About />} />
        <Route path="/contact" element={<Contact />} />
        <Route path="*" element={<NotFound />} />
      </Routes>
    </div>
  )
}

export default App
```

### 3. Cr√©er vos composants pages

```jsx
// src/pages/Home.jsx
function Home() {
  return (
    <div>
      <h1>üè† Accueil</h1>
      <p>Bienvenue sur la page d'accueil !</p>
    </div>
  )
}

export default Home

// src/pages/About.jsx
function About() {
  return (
    <div>
      <h1>üìñ √Ä propos</h1>
      <p>Voici notre histoire...</p>
    </div>
  )
}

export default About
```

---

## Navigation avec Link et NavLink

### Le probl√®me avec `<a href="">`

Si vous utilisez des liens HTML classiques, **toute la page se recharge** √† chaque clic. On perd tous les avantages d'une SPA !

### La solution : Link

```jsx
import { Link } from 'react-router-dom'

function Navigation() {
  return (
    <nav>
      <Link to="/">Home</Link>
      <Link to="/about">About</Link>
      <Link to="/contact">Contact</Link>
    </nav>
  )
}
```

### NavLink pour les liens actifs

`NavLink` permet de styliser le lien de la page courante :

```jsx
import { NavLink } from 'react-router-dom'

function Navigation() {
  return (
    <nav>
      <NavLink
        to="/"
        className={({ isActive }) => isActive ? 'active-link' : ''}
      >
        Home
      </NavLink>
      <NavLink
        to="/about"
        className={({ isActive }) => isActive ? 'active-link' : ''}
      >
        About
      </NavLink>
    </nav>
  )
}
```

### CSS pour les liens actifs

```css
/* Dans votre CSS */
.active-link {
  color: #007bff;
  font-weight: bold;
  text-decoration: underline;
}
```

---

## Param√®tres d'URL

### Param√®tres de route (:id)

Pour des URLs comme `/user/123` ou `/product/abc` :

```jsx
import { Routes, Route } from 'react-router-dom'
import UserProfile from './pages/UserProfile'
import ProductDetail from './pages/ProductDetail'

function App() {
  return (
    <Routes>
      <Route path="/user/:id" element={<UserProfile />} />
      <Route path="/product/:productId" element={<ProductDetail />} />
    </Routes>
  )
}
```

### R√©cup√©rer les param√®tres avec useParams

```jsx
import { useParams } from 'react-router-dom'

function UserProfile() {
  const { id } = useParams()

  return (
    <div>
      <h1>Profil utilisateur</h1>
      <p>ID utilisateur : {id}</p>
    </div>
  )
}

function ProductDetail() {
  const { productId } = useParams()

  return (
    <div>
      <h1>D√©tail du produit</h1>
      <p>ID produit : {productId}</p>
    </div>
  )
}
```

### Param√®tres de requ√™te (?search=...)

Pour des URLs comme `/search?q=react&category=tech` :

```jsx
import { useSearchParams } from 'react-router-dom'

function SearchPage() {
  const [searchParams, setSearchParams] = useSearchParams()

  const query = searchParams.get('q') || ''
  const category = searchParams.get('category') || 'all'

  const updateSearch = (newQuery) => {
    setSearchParams({
      q: newQuery,
      category: category
    })
  }

  return (
    <div>
      <h1>Recherche</h1>
      <p>Recherche : {query}</p>
      <p>Cat√©gorie : {category}</p>
      <input
        value={query}
        onChange={(e) => updateSearch(e.target.value)}
        placeholder="Rechercher..."
      />
    </div>
  )
}
```

---

## Navigation programmatique

### useNavigate pour la navigation

```jsx
import { useNavigate } from 'react-router-dom'

function LoginForm() {
  const navigate = useNavigate()

  const handleSubmit = (e) => {
    e.preventDefault()
    // Logique de connexion...

    // Redirection apr√®s connexion r√©ussie
    navigate('/dashboard')

    // Ou redirection en rempla√ßant l'historique
    navigate('/dashboard', { replace: true })

    // Ou retour en arri√®re
    navigate(-1)
  }

  return (
    <form onSubmit={handleSubmit}>
      <input type="email" placeholder="Email" />
      <input type="password" placeholder="Mot de passe" />
      <button type="submit">Se connecter</button>
    </form>
  )
}
```

### Redirection avec Navigate

```jsx
import { Navigate } from 'react-router-dom'

function ProtectedRoute({ children, isAuthenticated }) {
  if (!isAuthenticated) {
    return <Navigate to="/login" replace />
  }

  return children
}

// Utilisation
<Route
  path="/dashboard"
  element={
    <ProtectedRoute isAuthenticated={user.isLoggedIn}>
      <Dashboard />
    </ProtectedRoute>
  }
/>
```

---

## Routes imbriqu√©es

### Structure avec Outlet

```jsx
import { Routes, Route, Outlet } from 'react-router-dom'

function Layout() {
  return (
    <div>
      <header>Mon Site</header>
      <nav>
        <Link to="/">Home</Link>
        <Link to="/blog">Blog</Link>
        <Link to="/blog/new">Nouvel article</Link>
      </nav>
      <main>
        <Outlet /> {/* Ici s'affichent les composants enfants */}
      </main>
      <footer>¬© 2024</footer>
    </div>
  )
}

function App() {
  return (
    <Routes>
      <Route path="/" element={<Layout />}>
        <Route index element={<Home />} />
        <Route path="blog" element={<BlogList />} />
        <Route path="blog/new" element={<BlogForm />} />
        <Route path="blog/:id" element={<BlogPost />} />
      </Route>
    </Routes>
  )
}
```

### URLs imbriqu√©es avanc√©es

```jsx
// Structure pour des URLs comme :
// /admin/users
// /admin/users/123
// /admin/users/123/edit

function App() {
  return (
    <Routes>
      <Route path="/admin" element={<AdminLayout />}>
        <Route path="users" element={<UsersList />} />
        <Route path="users/:userId" element={<UserDetail />}>
          <Route index element={<UserInfo />} />
          <Route path="edit" element={<UserEdit />} />
          <Route path="permissions" element={<UserPermissions />} />
        </Route>
      </Route>
    </Routes>
  )
}
```

---

## Hooks avanc√©s

### useLocation

```jsx
import { useLocation } from 'react-router-dom'

function Analytics() {
  const location = useLocation()

  useEffect(() => {
    // Envoyer les donn√©es d'analytics
    console.log('Page visit√©e :', location.pathname)
    console.log('Param√®tres :', location.search)
    console.log('State :', location.state)
  }, [location])

  return null
}
```

### useNavigationType

```jsx
import { useNavigationType } from 'react-router-dom'

function PageTransition() {
  const navigationType = useNavigationType()

  // 'PUSH' | 'REPLACE' | 'POP'
  const isBackButton = navigationType === 'POP'

  return (
    <div className={isBackButton ? 'slide-right' : 'slide-left'}>
      {/* Contenu avec animation */}
    </div>
  )
}
```

---

## Gestion d'erreurs et 404

### Page 404 personnalis√©e

```jsx
function NotFound() {
  const navigate = useNavigate()

  return (
    <div className="not-found">
      <h1>üîç Page non trouv√©e</h1>
      <p>Oups ! Cette page n'existe pas.</p>
      <div>
        <button onClick={() => navigate('/')}>
          Retour √† l'accueil
        </button>
        <button onClick={() => navigate(-1)}>
          Page pr√©c√©dente
        </button>
      </div>
    </div>
  )
}

// Dans vos routes
<Route path="*" element={<NotFound />} />
```

### ErrorBoundary avec React Router

```jsx
import { useRouteError } from 'react-router-dom'

function ErrorPage() {
  const error = useRouteError()

  return (
    <div className="error-page">
      <h1>‚ùå Erreur !</h1>
      <p>D√©sol√©, une erreur s'est produite.</p>
      <p>
        <i>{error.statusText || error.message}</i>
      </p>
    </div>
  )
}

// Configuration avec createBrowserRouter (v6.4+)
const router = createBrowserRouter([
  {
    path: "/",
    element: <Layout />,
    errorElement: <ErrorPage />,
    children: [
      { index: true, element: <Home /> },
      { path: "about", element: <About /> }
    ]
  }
])
```

---

## Exemple complet : Blog avec React Router

### Structure du projet

```
src/
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îú‚îÄ‚îÄ Layout.jsx
‚îÇ   ‚îú‚îÄ‚îÄ Navigation.jsx
‚îÇ   ‚îî‚îÄ‚îÄ PostCard.jsx
‚îú‚îÄ‚îÄ pages/
‚îÇ   ‚îú‚îÄ‚îÄ Home.jsx
‚îÇ   ‚îú‚îÄ‚îÄ BlogList.jsx
‚îÇ   ‚îú‚îÄ‚îÄ BlogPost.jsx
‚îÇ   ‚îú‚îÄ‚îÄ CreatePost.jsx
‚îÇ   ‚îî‚îÄ‚îÄ NotFound.jsx
‚îú‚îÄ‚îÄ hooks/
‚îÇ   ‚îî‚îÄ‚îÄ useBlogPosts.js
‚îî‚îÄ‚îÄ App.jsx
```

### App.jsx avec toutes les routes

```jsx
import { BrowserRouter, Routes, Route } from 'react-router-dom'
import Layout from './components/Layout'
import Home from './pages/Home'
import BlogList from './pages/BlogList'
import BlogPost from './pages/BlogPost'
import CreatePost from './pages/CreatePost'
import NotFound from './pages/NotFound'

function App() {
  return (
    <BrowserRouter>
      <Routes>
        <Route path="/" element={<Layout />}>
          <Route index element={<Home />} />
          <Route path="blog" element={<BlogList />} />
          <Route path="blog/new" element={<CreatePost />} />
          <Route path="blog/:slug" element={<BlogPost />} />
          <Route path="*" element={<NotFound />} />
        </Route>
      </Routes>
    </BrowserRouter>
  )
}

export default App
```

### Layout avec navigation

```jsx
import { Outlet } from 'react-router-dom'
import Navigation from './Navigation'

function Layout() {
  return (
    <div className="app">
      <Navigation />
      <main className="main-content">
        <Outlet />
      </main>
      <footer>
        <p>¬© 2024 Mon Blog React</p>
      </footer>
    </div>
  )
}

export default Layout
```

### Navigation avec liens actifs

```jsx
import { NavLink } from 'react-router-dom'

function Navigation() {
  return (
    <nav className="navbar">
      <div className="nav-brand">
        <NavLink to="/">üöÄ Mon Blog</NavLink>
      </div>
      <ul className="nav-links">
        <li>
          <NavLink
            to="/"
            className={({ isActive }) => isActive ? 'nav-link active' : 'nav-link'}
          >
            Accueil
          </NavLink>
        </li>
        <li>
          <NavLink
            to="/blog"
            className={({ isActive }) => isActive ? 'nav-link active' : 'nav-link'}
          >
            Blog
          </NavLink>
        </li>
        <li>
          <NavLink
            to="/blog/new"
            className={({ isActive }) => isActive ? 'nav-link active' : 'nav-link'}
          >
            √âcrire
          </NavLink>
        </li>
      </ul>
    </nav>
  )
}

export default Navigation
```

### Hook pour g√©rer les articles

```jsx
// hooks/useBlogPosts.js
import { useState, useEffect } from 'react'

export function useBlogPosts() {
  const [posts, setPosts] = useState([
    {
      id: 1,
      slug: 'premier-article',
      title: 'Mon Premier Article',
      excerpt: 'Voici le d√©but de mon blog...',
      content: 'Contenu complet de l\'article...',
      author: 'Andy',
      date: '2024-01-15',
      tags: ['react', 'javascript']
    },
    {
      id: 2,
      slug: 'react-router-guide',
      title: 'Guide React Router',
      excerpt: 'Tout sur la navigation en React...',
      content: 'Guide complet sur React Router...',
      author: 'Andy',
      date: '2024-01-20',
      tags: ['react', 'router']
    }
  ])

  const addPost = (newPost) => {
    const post = {
      ...newPost,
      id: Date.now(),
      slug: newPost.title.toLowerCase().replace(/\s+/g, '-'),
      date: new Date().toISOString().split('T')[0]
    }
    setPosts([post, ...posts])
  }

  const getPostBySlug = (slug) => {
    return posts.find(post => post.slug === slug)
  }

  return { posts, addPost, getPostBySlug }
}
```

### Page liste des articles

```jsx
import { Link } from 'react-router-dom'
import { useBlogPosts } from '../hooks/useBlogPosts'

function BlogList() {
  const { posts } = useBlogPosts()

  return (
    <div className="blog-list">
      <div className="header">
        <h1>üìù Tous les articles</h1>
        <Link to="/blog/new" className="btn btn-primary">
          Nouvel article
        </Link>
      </div>

      <div className="posts-grid">
        {posts.map(post => (
          <article key={post.id} className="post-card">
            <h2>
              <Link to={`/blog/${post.slug}`}>
                {post.title}
              </Link>
            </h2>
            <p className="post-meta">
              Par {post.author} ‚Ä¢ {post.date}
            </p>
            <p className="post-excerpt">{post.excerpt}</p>
            <div className="post-tags">
              {post.tags.map(tag => (
                <span key={tag} className="tag">#{tag}</span>
              ))}
            </div>
            <Link to={`/blog/${post.slug}`} className="read-more">
              Lire la suite ‚Üí
            </Link>
          </article>
        ))}
      </div>
    </div>
  )
}

export default BlogList
```

### Page article individuel

```jsx
import { useParams, useNavigate, Link } from 'react-router-dom'
import { useBlogPosts } from '../hooks/useBlogPosts'

function BlogPost() {
  const { slug } = useParams()
  const navigate = useNavigate()
  const { getPostBySlug } = useBlogPosts()

  const post = getPostBySlug(slug)

  if (!post) {
    return (
      <div className="not-found">
        <h1>‚ùå Article non trouv√©</h1>
        <p>L'article "{slug}" n'existe pas.</p>
        <button onClick={() => navigate('/blog')}>
          Retour au blog
        </button>
      </div>
    )
  }

  return (
    <article className="blog-post">
      <div className="post-header">
        <Link to="/blog" className="back-link">
          ‚Üê Retour au blog
        </Link>
        <h1>{post.title}</h1>
        <div className="post-meta">
          <span>Par {post.author}</span>
          <span>‚Ä¢</span>
          <span>{post.date}</span>
        </div>
        <div className="post-tags">
          {post.tags.map(tag => (
            <span key={tag} className="tag">#{tag}</span>
          ))}
        </div>
      </div>

      <div className="post-content">
        <p>{post.content}</p>
      </div>

      <div className="post-footer">
        <button onClick={() => navigate(-1)}>
          ‚Üê Article pr√©c√©dent
        </button>
        <Link to="/blog/new">
          √âcrire un article
        </Link>
      </div>
    </article>
  )
}

export default BlogPost
```

### Formulaire de cr√©ation

```jsx
import { useState } from 'react'
import { useNavigate } from 'react-router-dom'
import { useBlogPosts } from '../hooks/useBlogPosts'

function CreatePost() {
  const navigate = useNavigate()
  const { addPost } = useBlogPosts()
  const [formData, setFormData] = useState({
    title: '',
    excerpt: '',
    content: '',
    author: 'Andy',
    tags: ''
  })

  const handleSubmit = (e) => {
    e.preventDefault()

    if (!formData.title || !formData.content) {
      alert('Titre et contenu sont obligatoires !')
      return
    }

    const newPost = {
      ...formData,
      tags: formData.tags.split(',').map(tag => tag.trim()).filter(Boolean)
    }

    addPost(newPost)

    // Redirection vers l'article cr√©√©
    const slug = formData.title.toLowerCase().replace(/\s+/g, '-')
    navigate(`/blog/${slug}`)
  }

  const handleChange = (field, value) => {
    setFormData({ ...formData, [field]: value })
  }

  return (
    <div className="create-post">
      <h1>‚úçÔ∏è Nouvel article</h1>

      <form onSubmit={handleSubmit} className="post-form">
        <div className="form-group">
          <label>Titre *</label>
          <input
            type="text"
            value={formData.title}
            onChange={(e) => handleChange('title', e.target.value)}
            placeholder="Titre de votre article..."
            required
          />
        </div>

        <div className="form-group">
          <label>R√©sum√©</label>
          <textarea
            value={formData.excerpt}
            onChange={(e) => handleChange('excerpt', e.target.value)}
            placeholder="R√©sum√© de votre article..."
            rows="3"
          />
        </div>

        <div className="form-group">
          <label>Contenu *</label>
          <textarea
            value={formData.content}
            onChange={(e) => handleChange('content', e.target.value)}
            placeholder="Contenu de votre article..."
            rows="10"
            required
          />
        </div>

        <div className="form-group">
          <label>Tags (s√©par√©s par des virgules)</label>
          <input
            type="text"
            value={formData.tags}
            onChange={(e) => handleChange('tags', e.target.value)}
            placeholder="react, javascript, web..."
          />
        </div>

        <div className="form-actions">
          <button
            type="button"
            onClick={() => navigate('/blog')}
            className="btn btn-secondary"
          >
            Annuler
          </button>
          <button type="submit" className="btn btn-primary">
            Publier l'article
          </button>
        </div>
      </form>
    </div>
  )
}

export default CreatePost
```

---

## Routes prot√©g√©es et authentification

### Hook d'authentification

```jsx
// hooks/useAuth.js
import { useState, useContext, createContext } from 'react'

const AuthContext = createContext()

export function AuthProvider({ children }) {
  const [user, setUser] = useState(null)
  const [loading, setLoading] = useState(false)

  const login = async (email, password) => {
    setLoading(true)
    try {
      // Simuler un appel API
      await new Promise(resolve => setTimeout(resolve, 1000))

      if (email === 'admin@example.com' && password === 'password') {
        setUser({
          id: 1,
          email,
          name: 'Admin',
          role: 'admin'
        })
        return { success: true }
      } else {
        return { success: false, error: 'Identifiants incorrects' }
      }
    } finally {
      setLoading(false)
    }
  }

  const logout = () => {
    setUser(null)
  }

  return (
    <AuthContext.Provider value={{
      user,
      login,
      logout,
      loading,
      isAuthenticated: !!user
    }}>
      {children}
    </AuthContext.Provider>
  )
}

export function useAuth() {
  const context = useContext(AuthContext)
  if (!context) {
    throw new Error('useAuth doit √™tre utilis√© dans AuthProvider')
  }
  return context
}
```

### Composant de route prot√©g√©e

```jsx
import { Navigate, useLocation } from 'react-router-dom'
import { useAuth } from '../hooks/useAuth'

function ProtectedRoute({ children, requireAdmin = false }) {
  const { isAuthenticated, user } = useAuth()
  const location = useLocation()

  if (!isAuthenticated) {
    // Redirection vers login avec l'URL de destination
    return (
      <Navigate
        to="/login"
        state={{ from: location }}
        replace
      />
    )
  }

  if (requireAdmin && user.role !== 'admin') {
    return (
      <Navigate
        to="/unauthorized"
        replace
      />
    )
  }

  return children
}

export default ProtectedRoute
```

### Page de connexion

```jsx
import { useState } from 'react'
import { useNavigate, useLocation } from 'react-router-dom'
import { useAuth } from '../hooks/useAuth'

function Login() {
  const navigate = useNavigate()
  const location = useLocation()
  const { login, loading } = useAuth()

  const [formData, setFormData] = useState({
    email: '',
    password: ''
  })
  const [error, setError] = useState('')

  // URL de redirection apr√®s connexion
  const from = location.state?.from?.pathname || '/dashboard'

  const handleSubmit = async (e) => {
    e.preventDefault()
    setError('')

    const result = await login(formData.email, formData.password)

    if (result.success) {
      navigate(from, { replace: true })
    } else {
      setError(result.error)
    }
  }

  return (
    <div className="login-page">
      <form onSubmit={handleSubmit} className="login-form">
        <h1>üîê Connexion</h1>

        {error && (
          <div className="error-message">{error}</div>
        )}

        <div className="form-group">
          <input
            type="email"
            placeholder="Email"
            value={formData.email}
            onChange={(e) => setFormData({
              ...formData,
              email: e.target.value
            })}
            required
          />
        </div>

        <div className="form-group">
          <input
            type="password"
            placeholder="Mot de passe"
            value={formData.password}
            onChange={(e) => setFormData({
              ...formData,
              password: e.target.value
            })}
            required
          />
        </div>

        <button
          type="submit"
          disabled={loading}
          className="btn btn-primary"
        >
          {loading ? 'Connexion...' : 'Se connecter'}
        </button>

        <p className="login-hint">
          üí° Utilisez admin@example.com / password
        </p>
      </form>
    </div>
  )
}

export default Login
```

### Configuration avec routes prot√©g√©es

```jsx
import { AuthProvider } from './hooks/useAuth'
import ProtectedRoute from './components/ProtectedRoute'

function App() {
  return (
    <AuthProvider>
      <BrowserRouter>
        <Routes>
          <Route path="/" element={<Layout />}>
            <Route index element={<Home />} />
            <Route path="login" element={<Login />} />
            <Route path="blog" element={<BlogList />} />
            <Route path="blog/:slug" element={<BlogPost />} />

            {/* Routes prot√©g√©es */}
            <Route
              path="dashboard"
              element={
                <ProtectedRoute>
                  <Dashboard />
                </ProtectedRoute>
              }
            />
            <Route
              path="blog/new"
              element={
                <ProtectedRoute>
                  <CreatePost />
                </ProtectedRoute>
              }
            />

            {/* Routes admin uniquement */}
            <Route
              path="admin"
              element={
                <ProtectedRoute requireAdmin>
                  <AdminPanel />
                </ProtectedRoute>
              }
            />
          </Route>
        </Routes>
      </BrowserRouter>
    </AuthProvider>
  )
}
```

---

## Optimisations et bonnes pratiques

### Lazy loading des routes

```jsx
import { lazy, Suspense } from 'react'

// Chargement paresseux des composants
const BlogList = lazy(() => import('./pages/BlogList'))
const BlogPost = lazy(() => import('./pages/BlogPost'))
const Dashboard = lazy(() => import('./pages/Dashboard'))

function App() {
  return (
    <BrowserRouter>
      <Routes>
        <Route path="/" element={<Layout />}>
          <Route index element={<Home />} />
          <Route
            path="blog"
            element={
              <Suspense fallback={<div>Chargement...</div>}>
                <BlogList />
              </Suspense>
            }
          />
          <Route
            path="dashboard"
            element={
              <Suspense fallback={<div>Chargement du dashboard...</div>}>
                <ProtectedRoute>
                  <Dashboard />
                </ProtectedRoute>
              </Suspense>
            }
          />
        </Route>
      </Routes>
    </BrowserRouter>
  )
}
```

### Pr√©chargement des routes

```jsx
import { Link } from 'react-router-dom'

function Navigation() {
  const preloadRoute = async (routeModule) => {
    // Pr√©charger le composant au survol
    await routeModule()
  }

  return (
    <nav>
      <Link
        to="/blog"
        onMouseEnter={() => preloadRoute(() => import('./pages/BlogList'))}
      >
        Blog
      </Link>
      <Link
        to="/dashboard"
        onMouseEnter={() => preloadRoute(() => import('./pages/Dashboard'))}
      >
        Dashboard
      </Link>
    </nav>
  )
}
```

### Hook pour les breadcrumbs

```jsx
// hooks/useBreadcrumbs.js
import { useLocation } from 'react-router-dom'

export function useBreadcrumbs() {
  const location = useLocation()

  const pathnames = location.pathname.split('/').filter(x => x)

  const breadcrumbs = pathnames.map((pathname, index) => {
    const url = `/${pathnames.slice(0, index + 1).join('/')}`

    // Mapping des chemins vers des labels
    const labels = {
      'blog': 'Blog',
      'admin': 'Administration',
      'dashboard': 'Tableau de bord',
      'new': 'Nouveau'
    }

    return {
      label: labels[pathname] || pathname,
      url,
      isLast: index === pathnames.length - 1
    }
  })

  return breadcrumbs
}

// Composant Breadcrumbs
function Breadcrumbs() {
  const breadcrumbs = useBreadcrumbs()

  if (breadcrumbs.length === 0) return null

  return (
    <nav className="breadcrumbs">
      <Link to="/">Accueil</Link>
      {breadcrumbs.map((crumb) => (
        <span key={crumb.url}>
          <span className="separator"> / </span>
          {crumb.isLast ? (
            <span className="current">{crumb.label}</span>
          ) : (
            <Link to={crumb.url}>{crumb.label}</Link>
          )}
        </span>
      ))}
    </nav>
  )
}
```

---

## Migration et alternatives

### Migration depuis React Router v5

```jsx
// ‚ùå React Router v5 (obsol√®te)
import { Switch, Route, useHistory } from 'react-router-dom'

function OldApp() {
  const history = useHistory()

  return (
    <Switch>
      <Route exact path="/" component={Home} />
      <Route path="/about" component={About} />
    </Switch>
  )
}

// ‚úÖ React Router v6 (actuel)
import { Routes, Route, useNavigate } from 'react-router-dom'

function NewApp() {
  const navigate = useNavigate()

  return (
    <Routes>
      <Route path="/" element={<Home />} />
      <Route path="/about" element={<About />} />
    </Routes>
  )
}
```

### Alternatives √† React Router

#### Next.js App Router (pour les projets Next.js)

```jsx
// app/page.js (Next.js 13+)
export default function HomePage() {
  return <h1>Page d'accueil</h1>
}

// app/blog/page.js
export default function BlogPage() {
  return <h1>Blog</h1>
}

// Navigation en Next.js
import Link from 'next/link'

function Navigation() {
  return (
    <nav>
      <Link href="/">Accueil</Link>
      <Link href="/blog">Blog</Link>
    </nav>
  )
}
```

#### Reach Router (fusionn√© avec React Router)

```jsx
// ‚ùå Plus maintenu (fusionn√© dans React Router v6)
import { Router } from '@reach/router'

function OldReachApp() {
  return (
    <Router>
      <Home path="/" />
      <About path="/about" />
    </Router>
  )
}
```

---

## Points cl√©s √† retenir

### Les essentiels

1. **BrowserRouter** = wrapper principal pour activer le routing
2. **Routes + Route** = d√©finir les chemins et composants
3. **Link/NavLink** = navigation sans rechargement
4. **useParams** = r√©cup√©rer les param√®tres d'URL
5. **useNavigate** = navigation programmatique
6. **Outlet** = afficher les routes imbriqu√©es

### Les bonnes pratiques

1. **Structure claire** : s√©parez vos pages dans un dossier d√©di√©
2. **Routes prot√©g√©es** : v√©rifiez l'authentification
3. **404 personnalis√©e** : route `path="*"` en dernier
4. **Lazy loading** : pour de meilleures performances
5. **SEO** : utilisez les meta tags dynamiques

### Les pi√®ges √† √©viter

- ‚ùå Utiliser `<a href="">` au lieu de `<Link>`
- ‚ùå Oublier la route 404 (`path="*"`)
- ‚ùå Param√®tres d'URL non valid√©s
- ‚ùå Navigation sans gestion d'erreur
- ‚ùå Routes imbriqu√©es mal structur√©es

---

## Exercices pratiques

### Exercice 1 : Blog personnel

Cr√©ez un blog avec :

- Liste des articles (`/blog`)
- Article individuel (`/blog/:slug`)
- Cr√©ation d'article (`/blog/new`)
- Navigation fluide
- Page 404

### Exercice 2 : Dashboard admin

Cr√©ez un dashboard avec :

- Authentification (`/login`)
- Routes prot√©g√©es (`/admin/*`)
- Navigation imbriqu√©e
- Gestion des permissions

### Exercice 3 : E-commerce

Cr√©ez une boutique avec :

- Catalogue (`/products`)
- Produit (`/product/:id`)
- Panier (`/cart`)
- Commande (`/checkout`)
- Filtres par URL (`/products?category=tech&price=100-500`)

---

## Ressources pour aller plus loin

- üìö [React Router Documentation](https://reactrouter.com/)
- üéØ [React Router Tutorial](https://reactrouter.com/en/main/start/tutorial)
- üîÑ [Migration Guide v5 ‚Üí v6](https://reactrouter.com/en/main/upgrading/v5)
- üöÄ [TanStack Router](https://tanstack.com/router/latest) (alternative moderne)
- üìñ [Next.js Routing](https://nextjs.org/docs/app/building-your-application/routing) (pour les projets Next.js)

---

**Prochaine √©tape :** Maintenant que tu ma√Ætrises React Router, on va s'attaquer √† la gestion d'√©tat avanc√©e avec Context API et les state managers comme Zustand dans le prochain chapitre ! üöÄ
