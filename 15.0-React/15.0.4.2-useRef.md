# React - useRef : RÃ©fÃ©rences et Valeurs Mutables

Il te permet d'accÃ©der directement au **DOM** ou de **stocker des valeurs mutables** qui ne dÃ©clenchent pas de re-render. C'est ton couteau suisse pour sortir du paradigme React quand nÃ©cessaire !

---

## Qu'est-ce que useRef ?

### Les Deux Usages Principaux

1. **ğŸ¯ RÃ©fÃ©rences DOM** : AccÃ©der directement aux Ã©lÃ©ments HTML
2. **ğŸ’¾ Valeurs mutables** : Stocker des donnÃ©es qui ne causent pas de re-render

### DiffÃ©rence avec useState

```jsx
import { useState, useRef, useEffect } from 'react'

function StateVsRef() {
  const [stateCount, setStateCount] = useState(0)
  const refCount = useRef(0)
  const renderCount = useRef(0)

  // Compter les renders
  renderCount.current++

  const incrementState = () => {
    setStateCount(prev => prev + 1) // âœ… DÃ©clenche un re-render
  }

  const incrementRef = () => {
    refCount.current++ // âœ… PAS de re-render !
    console.log('Ref count:', refCount.current)
  }

  return (
    <div>
      <h3>State vs Ref</h3>
      <p>Nombre de renders: {renderCount.current}</p>
      <p>State count: {stateCount} (dÃ©clenche re-render)</p>
      <p>Ref count: {refCount.current} (PAS de re-render)</p>
      
      <button onClick={incrementState}>
        Increment State (re-render)
      </button>
      <button onClick={incrementRef}>
        Increment Ref (pas de re-render)
      </button>
    </div>
  )
}
```

---

## useRef pour le DOM

### AccÃ¨s aux Ã‰lÃ©ments HTML

```jsx
function DomReferences() {
  const inputRef = useRef(null)
  const textAreaRef = useRef(null)
  const fileInputRef = useRef(null)
  const videoRef = useRef(null)

  const focusInput = () => {
    inputRef.current.focus()
  }

  const clearTextArea = () => {
    textAreaRef.current.value = ''
    textAreaRef.current.focus()
  }

  const triggerFileSelect = () => {
    fileInputRef.current.click()
  }

  const playVideo = () => {
    videoRef.current.play()
  }

  const pauseVideo = () => {
    videoRef.current.pause()
  }

  const handleFileChange = (e) => {
    const file = e.target.files[0]
    if (file) {
      console.log('Fichier sÃ©lectionnÃ©:', file.name)
    }
  }

  return (
    <div>
      <h3>RÃ©fÃ©rences DOM</h3>
      
      <div>
        <h4>Input avec focus</h4>
        <input 
          ref={inputRef} 
          placeholder="Clique le bouton pour me focus" 
        />
        <button onClick={focusInput}>Focus Input</button>
      </div>

      <div>
        <h4>TextArea avec clear</h4>
        <textarea 
          ref={textAreaRef}
          placeholder="Ã‰cris quelque chose..."
          rows={3}
        />
        <br />
        <button onClick={clearTextArea}>Clear & Focus</button>
      </div>

      <div>
        <h4>File Input cachÃ©</h4>
        <input 
          ref={fileInputRef}
          type="file"
          style={{ display: 'none' }}
          onChange={handleFileChange}
        />
        <button onClick={triggerFileSelect}>ğŸ“ SÃ©lectionner fichier</button>
      </div>

      <div>
        <h4>ContrÃ´le vidÃ©o</h4>
        <video 
          ref={videoRef}
          width="300"
          controls
        >
          <source src="https://www.w3schools.com/html/mov_bbb.mp4" type="video/mp4" />
        </video>
        <br />
        <button onClick={playVideo}>â–¶ï¸ Play</button>
        <button onClick={pauseVideo}>â¸ï¸ Pause</button>
      </div>
    </div>
  )
}
```

## Ressources Pour Aller Plus Loin

- ğŸ“š [useRef Documentation](https://react.dev/reference/react/useRef)
- ğŸ¯ [Manipulating the DOM with Refs](https://react.dev/learn/manipulating-the-dom-with-refs)
- ğŸ’¡ [forwardRef Documentation](https://react.dev/reference/react/forwardRef)
- ğŸ”§ [useImperativeHandle](https://react.dev/reference/react/useImperativeHandle)
